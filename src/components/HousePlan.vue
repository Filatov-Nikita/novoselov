<template>
  <div class="tw-overflow-x-scroll app-scroll-x app-scroll-y tw-relative">
    <img class="tw-max-w-none lg:tw-mx-0" ref="img" width="2280" height="1080" src="@/assets/images/house-1.jpg" />
    <PopupTouchMove v-if="tappable && showTouchPopup" @hide="showTouchPopup = false"/>

    <svg ref="svg" class="tw-absolute tw-inset-0 lg:tw-mx-0" viewBox="0 0 2880 1080">
      <path d="M1327 162L1299.69 142.518C1298.31 141.519 1297.19 140.328 1296.31 138.944C1295.44 137.561 1295 136.024 1295 134.333L1295 85.9167C1295 84.0146 1295.67 82.3863 1297.01 81.0318C1298.36 79.6773 1299.97 79 1301.86 79L1352.14 79C1354.03 79 1355.64 79.6773 1356.99 81.0318C1358.33 82.3863 1359 84.0146 1359 85.9167L1359 134.333C1359 136.024 1358.56 137.561 1357.69 138.944C1356.81 140.328 1355.69 141.519 1354.31 142.518L1327 162Z" fill="#F5F5F5"/>
      <path d="M1310.68 96.3408L1311.89 96.498C1311.76 97.332 1311.42 97.986 1310.88 98.46C1310.33 98.9294 1309.67 99.1641 1308.87 99.1641C1307.88 99.1641 1307.08 98.8405 1306.47 98.1934C1305.87 97.5417 1305.57 96.6097 1305.57 95.3975C1305.57 94.6136 1305.7 93.9277 1305.96 93.3398C1306.22 92.752 1306.61 92.3122 1307.14 92.0205C1307.68 91.7243 1308.26 91.5762 1308.88 91.5762C1309.67 91.5762 1310.31 91.7767 1310.81 92.1777C1311.32 92.5742 1311.64 93.1393 1311.78 93.873L1310.58 94.0576C1310.47 93.57 1310.27 93.2031 1309.97 92.957C1309.69 92.7109 1309.34 92.5879 1308.93 92.5879C1308.31 92.5879 1307.8 92.8112 1307.42 93.2578C1307.03 93.6999 1306.84 94.4017 1306.84 95.3633C1306.84 96.3385 1307.02 97.0472 1307.4 97.4893C1307.77 97.9313 1308.26 98.1523 1308.86 98.1523C1309.34 98.1523 1309.75 98.0042 1310.07 97.708C1310.39 97.4118 1310.6 96.9561 1310.68 96.3408ZM1317.64 96.6621L1318.91 96.8193C1318.71 97.5622 1318.34 98.1387 1317.79 98.5488C1317.25 98.959 1316.56 99.1641 1315.72 99.1641C1314.65 99.1641 1313.81 98.8382 1313.19 98.1865C1312.57 97.5303 1312.26 96.612 1312.26 95.4316C1312.26 94.2103 1312.57 93.2624 1313.2 92.5879C1313.83 91.9134 1314.64 91.5762 1315.65 91.5762C1316.62 91.5762 1317.41 91.9066 1318.03 92.5674C1318.64 93.2282 1318.95 94.1579 1318.95 95.3564C1318.95 95.4294 1318.95 95.5387 1318.94 95.6846H1313.53C1313.57 96.4821 1313.8 97.0928 1314.21 97.5166C1314.61 97.9404 1315.12 98.1523 1315.72 98.1523C1316.17 98.1523 1316.56 98.0339 1316.88 97.7969C1317.2 97.5599 1317.45 97.1816 1317.64 96.6621ZM1313.6 94.6729H1317.65C1317.6 94.0622 1317.44 93.6042 1317.19 93.2988C1316.79 92.8249 1316.29 92.5879 1315.66 92.5879C1315.1 92.5879 1314.62 92.777 1314.23 93.1553C1313.85 93.5335 1313.64 94.0394 1313.6 94.6729ZM1320.17 91.7402H1321.4V94.8779C1321.8 94.8779 1322.07 94.8027 1322.22 94.6523C1322.38 94.502 1322.62 94.0645 1322.92 93.3398C1323.16 92.7656 1323.36 92.3874 1323.51 92.2051C1323.66 92.0228 1323.83 91.8997 1324.03 91.8359C1324.22 91.7721 1324.54 91.7402 1324.97 91.7402H1325.22V92.7588L1324.88 92.752C1324.55 92.752 1324.35 92.7998 1324.25 92.8955C1324.16 92.9958 1324.01 93.2943 1323.82 93.791C1323.63 94.265 1323.46 94.5931 1323.3 94.7754C1323.15 94.9577 1322.91 95.124 1322.59 95.2744C1323.11 95.4157 1323.63 95.9079 1324.14 96.751L1325.49 99H1324.14L1322.83 96.751C1322.56 96.2998 1322.32 96.0036 1322.12 95.8623C1321.92 95.7165 1321.68 95.6436 1321.4 95.6436V99H1320.17V91.7402ZM1326.05 91.7402H1327.28V97.9883H1330.68V91.7402H1331.91V97.9883H1332.7V101.058H1331.69V99H1326.05V91.7402ZM1333.77 91.7402H1335V97.2773L1338.41 91.7402H1339.74V99H1338.51V93.4971L1335.1 99H1333.77V91.7402ZM1347.03 91.7402V99H1345.8V96.1699H1345.09C1344.66 96.1699 1344.33 96.2269 1344.12 96.3408C1343.91 96.4502 1343.6 96.8079 1343.2 97.4141L1342.12 99H1340.6L1341.93 97.0449C1342.33 96.4479 1342.73 96.1107 1343.14 96.0332C1342.43 95.9375 1341.91 95.6846 1341.57 95.2744C1341.23 94.8643 1341.06 94.3926 1341.06 93.8594C1341.06 93.2305 1341.29 92.7201 1341.73 92.3281C1342.17 91.9362 1342.82 91.7402 1343.66 91.7402H1347.03ZM1345.8 92.7588H1344.05C1343.32 92.7588 1342.84 92.8727 1342.63 93.1006C1342.42 93.3285 1342.32 93.5951 1342.32 93.9004C1342.32 94.3333 1342.47 94.6523 1342.78 94.8574C1343.09 95.0579 1343.65 95.1582 1344.44 95.1582H1345.8V92.7588Z" fill="#9BA5B0"/>
      <path d="M1329.05 110.8H1330.42V136H1327.43V114.292L1321.63 116.632V113.68L1329.05 110.8Z" fill="#18283A"/>
      <path d="M1661 210L1633.69 190.518C1632.31 189.519 1631.19 188.328 1630.31 186.944C1629.44 185.561 1629 184.024 1629 182.333L1629 133.917C1629 132.015 1629.67 130.386 1631.01 129.032C1632.36 127.677 1633.97 127 1635.86 127L1686.14 127C1688.03 127 1689.64 127.677 1690.99 129.032C1692.33 130.386 1693 132.015 1693 133.917L1693 182.333C1693 184.024 1692.56 185.561 1691.69 186.944C1690.81 188.328 1689.69 189.519 1688.31 190.518L1661 210Z" fill="#F5F5F5"/>
      <path d="M1644.68 144.341L1645.89 144.498C1645.76 145.332 1645.42 145.986 1644.88 146.46C1644.33 146.929 1643.67 147.164 1642.87 147.164C1641.88 147.164 1641.08 146.84 1640.47 146.193C1639.87 145.542 1639.57 144.61 1639.57 143.397C1639.57 142.614 1639.7 141.928 1639.96 141.34C1640.22 140.752 1640.61 140.312 1641.14 140.021C1641.68 139.724 1642.26 139.576 1642.88 139.576C1643.67 139.576 1644.31 139.777 1644.81 140.178C1645.32 140.574 1645.64 141.139 1645.78 141.873L1644.58 142.058C1644.47 141.57 1644.27 141.203 1643.97 140.957C1643.69 140.711 1643.34 140.588 1642.93 140.588C1642.31 140.588 1641.8 140.811 1641.42 141.258C1641.03 141.7 1640.84 142.402 1640.84 143.363C1640.84 144.339 1641.02 145.047 1641.4 145.489C1641.77 145.931 1642.26 146.152 1642.86 146.152C1643.34 146.152 1643.75 146.004 1644.07 145.708C1644.39 145.412 1644.6 144.956 1644.68 144.341ZM1651.64 144.662L1652.91 144.819C1652.71 145.562 1652.34 146.139 1651.79 146.549C1651.25 146.959 1650.56 147.164 1649.72 147.164C1648.65 147.164 1647.81 146.838 1647.19 146.187C1646.57 145.53 1646.26 144.612 1646.26 143.432C1646.26 142.21 1646.57 141.262 1647.2 140.588C1647.83 139.913 1648.64 139.576 1649.65 139.576C1650.62 139.576 1651.41 139.907 1652.03 140.567C1652.64 141.228 1652.95 142.158 1652.95 143.356C1652.95 143.429 1652.95 143.539 1652.94 143.685H1647.53C1647.57 144.482 1647.8 145.093 1648.21 145.517C1648.61 145.94 1649.12 146.152 1649.72 146.152C1650.17 146.152 1650.56 146.034 1650.88 145.797C1651.2 145.56 1651.45 145.182 1651.64 144.662ZM1647.6 142.673H1651.65C1651.6 142.062 1651.44 141.604 1651.19 141.299C1650.79 140.825 1650.29 140.588 1649.66 140.588C1649.1 140.588 1648.62 140.777 1648.23 141.155C1647.85 141.534 1647.64 142.039 1647.6 142.673ZM1654.17 139.74H1655.4V142.878C1655.8 142.878 1656.07 142.803 1656.22 142.652C1656.38 142.502 1656.62 142.064 1656.92 141.34C1657.16 140.766 1657.36 140.387 1657.51 140.205C1657.66 140.023 1657.83 139.9 1658.03 139.836C1658.22 139.772 1658.54 139.74 1658.97 139.74H1659.22V140.759L1658.88 140.752C1658.55 140.752 1658.35 140.8 1658.25 140.896C1658.16 140.996 1658.01 141.294 1657.82 141.791C1657.63 142.265 1657.46 142.593 1657.3 142.775C1657.15 142.958 1656.91 143.124 1656.59 143.274C1657.11 143.416 1657.63 143.908 1658.14 144.751L1659.49 147H1658.14L1656.83 144.751C1656.56 144.3 1656.32 144.004 1656.12 143.862C1655.92 143.716 1655.68 143.644 1655.4 143.644V147H1654.17V139.74ZM1660.05 139.74H1661.28V145.988H1664.68V139.74H1665.91V145.988H1666.7V149.058H1665.69V147H1660.05V139.74ZM1667.77 139.74H1669V145.277L1672.41 139.74H1673.74V147H1672.51V141.497L1669.1 147H1667.77V139.74ZM1681.03 139.74V147H1679.8V144.17H1679.09C1678.66 144.17 1678.33 144.227 1678.12 144.341C1677.91 144.45 1677.6 144.808 1677.2 145.414L1676.12 147H1674.6L1675.93 145.045C1676.33 144.448 1676.73 144.111 1677.14 144.033C1676.43 143.938 1675.91 143.685 1675.57 143.274C1675.23 142.864 1675.06 142.393 1675.06 141.859C1675.06 141.23 1675.29 140.72 1675.73 140.328C1676.17 139.936 1676.82 139.74 1677.66 139.74H1681.03ZM1679.8 140.759H1678.05C1677.32 140.759 1676.84 140.873 1676.63 141.101C1676.42 141.328 1676.32 141.595 1676.32 141.9C1676.32 142.333 1676.47 142.652 1676.78 142.857C1677.09 143.058 1677.65 143.158 1678.44 143.158H1679.8V140.759Z" fill="#9BA5B0"/>
      <path d="M1670.44 181.12V184H1651.54V181.84L1658.85 175.468C1662.24 172.516 1664.4 170.5 1665.33 169.42C1666.29 168.34 1666.77 167.188 1666.77 165.964C1666.77 164.572 1666.26 163.444 1665.22 162.58C1664.19 161.692 1662.81 161.248 1661.08 161.248C1659.36 161.248 1657.96 161.716 1656.91 162.652C1655.85 163.564 1655.14 164.86 1654.78 166.54H1651.76C1652.12 164.044 1653.15 162.064 1654.86 160.6C1656.56 159.136 1658.68 158.404 1661.23 158.404C1663.77 158.404 1665.82 159.112 1667.38 160.528C1668.97 161.944 1669.76 163.72 1669.76 165.856C1669.76 167.584 1669.18 169.144 1668.03 170.536C1666.9 171.904 1664.66 174.04 1661.3 176.944L1656.48 181.12H1670.44Z" fill="#18283A"/>
      <rect x="769.5" y="41.5" width="95" height="123.5" rx="7.5" fill="#FBB03B" stroke="#E99512"/>
      <path d="M798.519 79.0112L800.334 79.2471C800.136 80.498 799.627 81.479 798.806 82.1899C797.993 82.894 796.991 83.2461 795.802 83.2461C794.312 83.2461 793.112 82.7607 792.203 81.79C791.3 80.8125 790.849 79.4146 790.849 77.5962C790.849 76.4204 791.044 75.3916 791.434 74.5098C791.823 73.6279 792.415 72.9683 793.208 72.5308C794.007 72.0864 794.876 71.8643 795.812 71.8643C796.995 71.8643 797.962 72.165 798.714 72.7666C799.466 73.3613 799.948 74.209 800.16 75.3096L798.365 75.5864C798.194 74.855 797.89 74.3047 797.453 73.9355C797.022 73.5664 796.499 73.3818 795.884 73.3818C794.954 73.3818 794.199 73.7168 793.618 74.3867C793.037 75.0498 792.746 76.1025 792.746 77.5449C792.746 79.0078 793.027 80.0708 793.587 80.7339C794.148 81.397 794.879 81.7285 795.781 81.7285C796.506 81.7285 797.111 81.5063 797.596 81.062C798.082 80.6177 798.389 79.9341 798.519 79.0112ZM802.949 72.1104H810.537V81.4824H811.716V86.0864H810.199V83H801.627V86.0864H800.109V81.4824H801.083C802.382 79.7188 803.004 76.5947 802.949 72.1104ZM804.487 73.6382C804.351 77.1724 803.804 79.7871 802.847 81.4824H808.702V73.6382H804.487ZM820.443 81.6567C819.759 82.2378 819.1 82.6479 818.464 82.8872C817.835 83.1265 817.158 83.2461 816.434 83.2461C815.237 83.2461 814.318 82.9556 813.675 82.3745C813.033 81.7866 812.711 81.0381 812.711 80.1289C812.711 79.5957 812.831 79.1104 813.07 78.6729C813.316 78.2285 813.634 77.873 814.024 77.6064C814.42 77.3398 814.865 77.1382 815.357 77.0015C815.719 76.9058 816.266 76.8135 816.998 76.7246C818.488 76.5469 819.585 76.335 820.289 76.0889C820.296 75.8359 820.299 75.6753 820.299 75.6069C820.299 74.855 820.125 74.3252 819.776 74.0176C819.305 73.6006 818.604 73.3921 817.674 73.3921C816.806 73.3921 816.164 73.5459 815.747 73.8535C815.336 74.1543 815.032 74.6909 814.834 75.4634L813.029 75.2173C813.193 74.4448 813.463 73.8228 813.839 73.3511C814.215 72.8726 814.759 72.5068 815.47 72.2539C816.181 71.9941 817.004 71.8643 817.941 71.8643C818.871 71.8643 819.626 71.9736 820.207 72.1924C820.788 72.4111 821.215 72.688 821.489 73.0229C821.762 73.3511 821.954 73.7681 822.063 74.2739C822.125 74.5884 822.155 75.1558 822.155 75.9761V78.437C822.155 80.1528 822.193 81.2397 822.268 81.6978C822.35 82.1489 822.507 82.583 822.74 83H820.812C820.621 82.6172 820.498 82.1694 820.443 81.6567ZM820.289 77.5347C819.619 77.8081 818.614 78.0405 817.274 78.2319C816.516 78.3413 815.979 78.4644 815.665 78.6011C815.35 78.7378 815.107 78.9395 814.937 79.2061C814.766 79.4658 814.68 79.7563 814.68 80.0776C814.68 80.5698 814.865 80.98 815.234 81.3081C815.61 81.6362 816.157 81.8003 816.875 81.8003C817.585 81.8003 818.218 81.6465 818.771 81.3389C819.325 81.0244 819.732 80.5972 819.992 80.0571C820.19 79.6401 820.289 79.0249 820.289 78.2114V77.5347ZM823.458 72.1104H825.304V74.1714C825.304 75.0601 825.355 75.7061 825.457 76.1094C825.567 76.5059 825.823 76.8545 826.226 77.1553C826.63 77.4492 827.136 77.5962 827.744 77.5962C828.441 77.5962 829.344 77.4116 830.451 77.0425V72.1104H832.297V83H830.451V78.6113C829.316 78.9668 828.257 79.1445 827.272 79.1445C826.445 79.1445 825.714 78.936 825.078 78.519C824.449 78.0952 824.022 77.5791 823.796 76.9707C823.571 76.3623 823.458 75.6924 823.458 74.9609V72.1104ZM841.772 81.6567C841.088 82.2378 840.429 82.6479 839.793 82.8872C839.164 83.1265 838.487 83.2461 837.763 83.2461C836.566 83.2461 835.647 82.9556 835.004 82.3745C834.362 81.7866 834.04 81.0381 834.04 80.1289C834.04 79.5957 834.16 79.1104 834.399 78.6729C834.645 78.2285 834.963 77.873 835.353 77.6064C835.749 77.3398 836.194 77.1382 836.686 77.0015C837.048 76.9058 837.595 76.8135 838.327 76.7246C839.817 76.5469 840.914 76.335 841.618 76.0889C841.625 75.8359 841.628 75.6753 841.628 75.6069C841.628 74.855 841.454 74.3252 841.105 74.0176C840.634 73.6006 839.933 73.3921 839.003 73.3921C838.135 73.3921 837.493 73.5459 837.076 73.8535C836.665 74.1543 836.361 74.6909 836.163 75.4634L834.358 75.2173C834.522 74.4448 834.792 73.8228 835.168 73.3511C835.544 72.8726 836.088 72.5068 836.799 72.2539C837.51 71.9941 838.333 71.8643 839.27 71.8643C840.2 71.8643 840.955 71.9736 841.536 72.1924C842.117 72.4111 842.544 72.688 842.818 73.0229C843.091 73.3511 843.283 73.7681 843.392 74.2739C843.453 74.5884 843.484 75.1558 843.484 75.9761V78.437C843.484 80.1528 843.522 81.2397 843.597 81.6978C843.679 82.1489 843.836 82.583 844.069 83H842.141C841.95 82.6172 841.827 82.1694 841.772 81.6567ZM841.618 77.5347C840.948 77.8081 839.943 78.0405 838.603 78.2319C837.845 78.3413 837.308 78.4644 836.993 78.6011C836.679 78.7378 836.436 78.9395 836.265 79.2061C836.095 79.4658 836.009 79.7563 836.009 80.0776C836.009 80.5698 836.194 80.98 836.563 81.3081C836.939 81.6362 837.486 81.8003 838.203 81.8003C838.914 81.8003 839.547 81.6465 840.1 81.3389C840.654 81.0244 841.061 80.5972 841.321 80.0571C841.519 79.6401 841.618 79.0249 841.618 78.2114V77.5347ZM798.647 110V94.9678H800.636V110H798.647ZM804.072 110V94.9678H806.061V110H804.072ZM814.337 99.1104H816.183V103.817C816.77 103.817 817.181 103.704 817.413 103.479C817.652 103.253 818.001 102.597 818.459 101.51C818.821 100.648 819.115 100.081 819.341 99.8076C819.566 99.5342 819.826 99.3496 820.12 99.2539C820.414 99.1582 820.886 99.1104 821.535 99.1104H821.904V100.638L821.392 100.628C820.906 100.628 820.595 100.7 820.458 100.843C820.315 100.994 820.096 101.441 819.802 102.187C819.522 102.897 819.266 103.39 819.033 103.663C818.801 103.937 818.442 104.186 817.957 104.412C818.749 104.624 819.529 105.362 820.294 106.626L822.314 110H820.284L818.315 106.626C817.912 105.95 817.56 105.505 817.259 105.293C816.958 105.075 816.6 104.965 816.183 104.965V110H814.337V99.1104ZM823.125 99.1104H827.38C828.426 99.1104 829.202 99.1992 829.708 99.377C830.221 99.5479 830.658 99.8657 831.02 100.331C831.39 100.795 831.574 101.353 831.574 102.002C831.574 102.521 831.465 102.976 831.246 103.366C831.034 103.749 830.713 104.07 830.282 104.33C830.795 104.5 831.219 104.822 831.554 105.293C831.895 105.758 832.066 106.312 832.066 106.955C831.998 107.987 831.629 108.752 830.959 109.251C830.289 109.75 829.315 110 828.037 110H823.125V99.1104ZM824.971 103.694H826.939C827.725 103.694 828.266 103.653 828.559 103.571C828.853 103.489 829.117 103.325 829.349 103.079C829.581 102.826 829.698 102.525 829.698 102.176C829.698 101.602 829.493 101.202 829.082 100.977C828.679 100.751 827.985 100.638 827.001 100.638H824.971V103.694ZM824.971 108.482H827.401C828.447 108.482 829.164 108.363 829.554 108.124C829.944 107.877 830.149 107.457 830.169 106.862C830.169 106.514 830.057 106.192 829.831 105.898C829.605 105.598 829.311 105.41 828.949 105.334C828.587 105.252 828.006 105.211 827.206 105.211H824.971V108.482ZM834.374 110V107.898H836.476V110H834.374ZM805.323 135.226V137H795.387C795.373 136.556 795.445 136.128 795.602 135.718C795.855 135.042 796.258 134.375 796.812 133.719C797.373 133.062 798.179 132.304 799.232 131.442C800.866 130.103 801.97 129.043 802.544 128.264C803.118 127.478 803.405 126.736 803.405 126.039C803.405 125.307 803.142 124.692 802.616 124.193C802.096 123.687 801.416 123.434 800.575 123.434C799.687 123.434 798.976 123.701 798.442 124.234C797.909 124.767 797.639 125.505 797.632 126.449L795.735 126.254C795.865 124.839 796.354 123.762 797.202 123.024C798.049 122.279 799.188 121.906 800.616 121.906C802.059 121.906 803.2 122.306 804.041 123.106C804.882 123.906 805.302 124.897 805.302 126.08C805.302 126.681 805.179 127.272 804.933 127.854C804.687 128.435 804.277 129.046 803.703 129.689C803.135 130.332 802.189 131.213 800.862 132.334C799.755 133.264 799.044 133.896 798.73 134.231C798.415 134.56 798.155 134.891 797.95 135.226H805.323ZM806.892 129.586C806.892 127.809 807.073 126.38 807.436 125.3C807.805 124.213 808.348 123.376 809.066 122.788C809.791 122.2 810.7 121.906 811.793 121.906C812.6 121.906 813.308 122.07 813.916 122.398C814.524 122.72 815.027 123.188 815.423 123.803C815.82 124.412 816.131 125.157 816.356 126.039C816.582 126.914 816.695 128.096 816.695 129.586C816.695 131.35 816.514 132.775 816.151 133.862C815.789 134.942 815.246 135.78 814.521 136.375C813.803 136.962 812.894 137.256 811.793 137.256C810.344 137.256 809.206 136.737 808.379 135.698C807.388 134.447 806.892 132.41 806.892 129.586ZM808.789 129.586C808.789 132.054 809.076 133.698 809.65 134.519C810.231 135.332 810.946 135.739 811.793 135.739C812.641 135.739 813.352 135.329 813.926 134.508C814.507 133.688 814.798 132.047 814.798 129.586C814.798 127.112 814.507 125.468 813.926 124.654C813.352 123.841 812.634 123.434 811.773 123.434C810.925 123.434 810.249 123.793 809.743 124.511C809.107 125.427 808.789 127.119 808.789 129.586ZM827.862 135.226V137H817.926C817.912 136.556 817.984 136.128 818.141 135.718C818.394 135.042 818.797 134.375 819.351 133.719C819.912 133.062 820.718 132.304 821.771 131.442C823.405 130.103 824.509 129.043 825.083 128.264C825.657 127.478 825.944 126.736 825.944 126.039C825.944 125.307 825.681 124.692 825.155 124.193C824.635 123.687 823.955 123.434 823.114 123.434C822.226 123.434 821.515 123.701 820.981 124.234C820.448 124.767 820.178 125.505 820.171 126.449L818.274 126.254C818.404 124.839 818.893 123.762 819.741 123.024C820.588 122.279 821.727 121.906 823.155 121.906C824.598 121.906 825.739 122.306 826.58 123.106C827.421 123.906 827.841 124.897 827.841 126.08C827.841 126.681 827.718 127.272 827.472 127.854C827.226 128.435 826.816 129.046 826.242 129.689C825.674 130.332 824.727 131.213 823.401 132.334C822.294 133.264 821.583 133.896 821.269 134.231C820.954 134.56 820.694 134.891 820.489 135.226H827.862ZM829.431 133.062L831.369 132.898C831.513 133.842 831.844 134.553 832.364 135.031C832.89 135.503 833.522 135.739 834.261 135.739C835.149 135.739 835.901 135.404 836.516 134.734C837.132 134.064 837.439 133.175 837.439 132.068C837.439 131.015 837.142 130.185 836.547 129.576C835.959 128.968 835.187 128.664 834.23 128.664C833.635 128.664 833.099 128.8 832.62 129.074C832.141 129.34 831.766 129.689 831.492 130.12L829.759 129.894L831.215 122.173H838.69V123.937H832.692L831.882 127.977C832.784 127.348 833.731 127.033 834.722 127.033C836.035 127.033 837.142 127.488 838.044 128.397C838.947 129.306 839.398 130.475 839.398 131.904C839.398 133.264 839.001 134.44 838.208 135.431C837.245 136.648 835.929 137.256 834.261 137.256C832.893 137.256 831.776 136.874 830.908 136.108C830.046 135.342 829.554 134.327 829.431 133.062Z" fill="white"/>

      <path
        v-for="(path, i) in paths"
        :key="i"
        :d="path"
        fill="#FBB03B"
        :opacity="active === storeyId(i) ? 0.65 : 0"
        @click="onClick($event, storeyId(i))"
        @mouseenter="onEnter($event, storeyId(i))"
        @mouseleave="onLeave($event, storeyId(i))" />
      />
    </svg>
  </div>
</template>

<script>
import { throttle } from 'throttle-debounce';
import PopupTouchMove from './PopupTouchMove.vue'

export default {
  props: {
    height: {
      required: true,
      type: String,
    },
    width: {
      required: true,
      type: String,
    },
    activeStorey: {
      default: undefined,
    },
  },
  emits: ["enter", "leave"],
  components: {
    PopupTouchMove
  },
  mounted() {
    this.calcStyles();
    this.$refs.img.addEventListener('load', this.calcStyles);
    this.resizer = throttle(500, this.calcStyles);
    window.addEventListener('resize', this.resizer);
  },
  beforeUnmount() {
    window.removeEventListener('resize', this.resizer);
  },
  data() {
    return {
      showTouchPopup: true,
      active: null,
      resizer: null,
      paths1: [
        'M1035.5 163.001L864.5 189.501V155.5L1034.5 128.676L1517.5 224.001V252L1035.5 163.001Z',
        'M1035 218.5L867 239.5V206.5L1035 182.5L1517 270.501V300L1035 218.5Z',
        'M1035 269.5L864 292V257L1035 235L1517 313.5V341.5L1035 269.5Z',
        'M1036 322.5L866.5 342V306L1036 288L1518 358.5V387.5L1036 322.5Z',
        'M1033.5 376L864 392V356L1033.5 338L1518 402V432.5L1033.5 376Z',
        'M1034.5 426L865 442V406L1034.5 392L1519 447V476L1034.5 426Z',
        'M1033.5 479.5L864 493.5V459L1033.5 445L1518 490V519.5L1033.5 479.5Z',
        'M1034.5 532.5L865 542.5V508L1034.5 494L1519 534.5V565L1034.5 532.5Z',
        'M1033 585L864 592V556.5L1033 547L1517 579V608.5L1033 585Z',
        'M1034 637L866.5 643.5V609.797L1034 602.5L1517 623.5V654L1034 637Z',
        'M1034 691L865.5 695V660L1034 654L1516.5 667.5V695.5L1034 691Z',
        'M1034 743L867 744.5L868 710L1034 708L1516.5 711V743H1034Z',
        'M1033.5 793H866V758.5L1033.5 760.5L1518.5 756V784L1033.5 793Z',
        'M1033.5 847.5L867.5 845.5V811.5L1033.5 813.5L1516.5 799V830L1033.5 847.5Z',
        'M1034 902L868 897.5V860.5L1034 865.5L1517 845.5V874.5L1034 902Z',
        'M1034 956.5L868 949V912L1034 919.5L1517 889.5V921.5L1034 956.5Z',
        'M1033 1007L867 999.5V962.5L1033 970L1516 936V969L1033 1007Z',
        'M1033 1070L867 1065.5V1019.5L1033 1027L1516 988V1025.5L1033 1070Z',
      ],
      paths2: [
        'M1548 265.288V221L1751 255.781V298L1548 265.288Z',
        'M1548 309.288V267L1751 300V340.5L1548 309.288Z',
        'M1548 353.288V311L1751 342.5V382.5L1548 353.288Z',
        'M1548 396.288V354L1751 384.5V425L1548 396.288Z',
        'M1548 440.288V398L1751 426V465L1548 440.288Z',
        'M1548 486V442L1751 466.5V505.5L1548 486Z',
        'M1548 532V488L1751 507.5V545.5L1548 532Z',
        'M1548 577V533L1751 547V589L1548 577Z',
        'M1548 622V578L1751 590.5V629.5L1548 622Z',
        'M1548 667V623L1751 631V671.5L1548 667Z',
        'M1548 709.5V668L1751 673.5V714L1548 709.5Z',
        'M1548 756V712L1751 715.5V753.5L1548 756Z',
        'M1548 800V758L1751 756V795.5L1548 800Z',
        'M1548 844V802L1751 797V836L1548 844Z',
        'M1548 889V847L1751 838V878L1548 889Z',
        'M1548 933V891L1751 880V919.5L1548 933Z',
        'M1548 976V934L1751 921.5V962.5L1548 976Z',
      ]
    };
  },
  computed: {
    paths() {
      return  this.paths1.reverse().concat(this.paths2.reverse());
    },
    tappable() {
      return this.$screen.touch;
    },
  },
  methods: {
    storeyId(i) {
      return i + 1;
    },
    calcStyles() {
      const ratio = 2880 / 1080;
      const w = window.innerWidth;
      const h = window.innerHeight - 97 - 81;

      const w2 = ratio * h;

      if(w2 < w) {
        this.$refs.img.style.width = w + 'px';
        this.$refs.img.style.height = 'auto';
      } else {
        this.$refs.img.style.height = h + 'px';
        this.$refs.img.style.width = 'auto';
      }

      setTimeout(() => {
        const computed = getComputedStyle(this.$refs.img);
        this.$refs.svg.style.width = computed.width;
        this.$refs.svg.style.height = computed.height;
      }, 0);
    },
    onClick(e, id) {
      this.active = id;
      if (this.tappable && this.activeStorey?.id !== id) {
        return this.$emit("enter", id);
      }
      this.$router.push({ name: "storey", params: { id: id } });
    },
    onEnter(e, id) {
      if (!this.tappable) {
        this.active = id;
        return this.$emit("enter", id);
      }
    },
    onLeave(e, id) {
      if (!this.tappable) {
        this.active = null;
        return this.$emit("leave", id);
      }
    },
  },
};
</script>
